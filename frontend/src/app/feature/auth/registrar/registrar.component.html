<div class="registro-container mat-elevation-z4">

  <h2 class="titulo">Crear cuenta</h2>

  <form [formGroup]="form" (ngSubmit)="registrar()" class="formulario">

    <!-- Nombre -->
    <mat-form-field appearance="outline" class="campo-medieval">
      <mat-label>Nombre de usuario</mat-label>
      <input matInput formControlName="nombre" placeholder="Ej. elMedieval123" />
      <mat-icon matSuffix>person</mat-icon>
    </mat-form-field>

    <!-- ContraseÃ±a -->
    <mat-form-field appearance="outline" class="campo-medieval">
      <mat-label>ContraseÃ±a</mat-label>
      <input matInput formControlName="password" type="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" />
      <mat-icon matSuffix>lock</mat-icon>
    </mat-form-field>

    <!-- Rol -->
    <mat-form-field appearance="outline" class="campo-medieval">
      <mat-label>Rol</mat-label>
      <mat-select formControlName="rol">
        <mat-option value="CARAVANERO">Caravanero</mat-option>
        <mat-option value="COMERCIANTE">Comerciante</mat-option>
        <mat-option value="ADMINISTRADOR">Administrador</mat-option>
      </mat-select>
    </mat-form-field>

    <!-- Nombre de caravana (solo admin) -->
    <mat-form-field *ngIf="rolValue === 'ADMINISTRADOR'"
                    appearance="outline"
                    class="campo-medieval">
      <mat-label>Nombre de la caravana</mat-label>
      <input matInput formControlName="nombreCaravana" placeholder="Ej. La Gran Ruta" />
      <mat-icon matSuffix>flag</mat-icon>
    </mat-form-field>

    <!-- SelecciÃ³n de caravana (jugadores normales) -->
    <mat-form-field *ngIf="rolValue !== 'ADMINISTRADOR'"
                    appearance="outline"
                    class="campo-medieval">
      <mat-label>Unirse a caravana</mat-label>
      <mat-select formControlName="caravanaId">
        <mat-option *ngFor="let c of caravanas" [value]="c.id">
          {{ c.nombre }}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <!-- BotÃ³n -->
    <button mat-raised-button color="primary" class="boton"
            type="submit"
            [disabled]="form.invalid || cargando">

      <mat-spinner *ngIf="cargando" diameter="20"></mat-spinner>
      <span *ngIf="!cargando">Crear cuenta</span>
    </button>
  </form>

  <p class="auth-link">
    Â¿Ya tienes una cuenta?
    <a routerLink="/login">Inicia sesiÃ³n aquÃ­</a>
  </p>
</div>
<pre style="margin-top: 2rem;">
ğŸ§© Form status: {{ form.status }}

ğŸ”¹ nombre: {{ form.get('nombre')?.status }}
ğŸ”¹ password: {{ form.get('password')?.status }}
ğŸ”¹ rol: {{ form.get('rol')?.status }}
ğŸ”¹ nombreCaravana: {{ form.get('nombreCaravana')?.status }} (value: {{ form.get('nombreCaravana')?.value }})
ğŸ”¹ caravanaId: {{ form.get('caravanaId')?.status }} (value: {{ form.get('caravanaId')?.value }})
</pre>
